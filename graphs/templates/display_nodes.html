<script type="text/javascript" src="{{STATIC_URL}}js/flot/jquery.flot.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/flot/jquery.flot.selection.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/jquery.flot.axislabels.js"></script>

<script type="text/javascript" src="{{STATIC_URL}}js/downloadify.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/swfobject.js"></script>

<script type="text/javascript" src="{{STATIC_URL}}js/plotter.js"></script>
<script type="text/javascript" src="/graphs/scaling_functions.js/"></script>

<link rel="stylesheet" media="all" type="text/css" href="{{STATIC_URL}}css/display_nodes.css" />

<div id="graph_container_heading">
<h1> Sensor Readings</h1>
<a id="share_link" href="/" ><div>Share this view</div></a>
</div>

<div id="graph_container">

    <!-- Create a placeholder for each datastream -->
    {% for stream in streams%}
    <div id="graph_container_{{stream.id}}" class="graph_container"> 
        <b id = "graph_title{{stream.id}}" class="graph_title"> </b>
        
        <div id ="{{stream.id}}" class="portcullis-graph">
            <div id="sensor{{stream.id}}" class="sensor_graph" ></div>
            <div id="overview{{stream.id}}" class = "overview_graph"></div>
        </div><!--end graph div-->
        
        <div id="{{stream.id}}_csv_container" style="display: none"><!--csv div-->
            <textarea id="sensor{{stream.id}}_csv"></textarea>
        </div><!--end csv div-->
        
        <div id="graph_selection_{{stream.id}}" class="graph_selection" style="display: none;">
            Time: <span id="selected_time_{{stream.id}}"></span>
            Value: <span id="selected_value_{{stream.id}}"></span>
        </div>
        <div id="stream_data_container_{{stream.id}}" class="stream_data_container">
            <ul>
                <li>Node: {{stream.node_id}}</li>
                <li>Port: {{stream.port_id}}</li>
                <li>Data In Range: <span id="datapoints_{{stream.id}}"><!-- Hook for number of data points for given range--></span></li>
                <li>Actual Data Shown: <span id="actual_datapoints_{{stream.id}}"><!-- Hook for number of data points for given graph--></span></li>
            </ul>
        </div>
        
        <div id="stream_controls_container_{{stream.id}}" class="stream_controls_container">
            <input type="button" value="Zoom Reset" onClick="resetZoom('{{stream.id}}');"/>
            <input type="checkbox" id="zoom_sync_{{stream.id}}" value="{{stream.id}}" class="stream_zoom" checked="checked"/> <label for="zoom_sync_{{stream.id}}">Zoom Sync</label>
            <label for="reduction_select_{{stream.id}}">Reduction Type:</label>
            <select id="reduction_select_{{stream.id}}" class="reduction_select" 
                    onchange="loadGraph('{{stream.id}}', 
                            $('#granularity').val(), 
                            getRanges(), 
                            graph_overview_callback(getRanges()));">
                {% for red in reductions %}
                {% if red == "mean" %}
                <option value="{{red}}" selected="selected">{{red|title}}</option>
                {% else %}
                <option value="{{red}}">{{red|title}}</option>
                {% endif %}
                {% endfor %}
            </select>
            <p id="downloadify{{stream.id}}"><!--Place holder for download button--></p>
        </div>
        
        <script>
            setupDownload("{{stream.id}}");
        </script>
    </div><!--End graph_container_id -->
    {% endfor %}
</div><!--End graph_container -->
